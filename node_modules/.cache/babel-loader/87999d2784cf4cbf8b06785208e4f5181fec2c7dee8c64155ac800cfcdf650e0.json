{"ast":null,"code":"import{useEffect,useState}from\"react\";import ProductList from\"./components/ProductList\";import ShoppingCart from\"./components/ShoppingCart\";import OrderSummary from\"./components/OrderSummary\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[products,setProducts]=useState([]);const[cartItems,setCartItems]=useState([]);const[currentPage,setCurrentPage]=useState(\"products\");useEffect(()=>{fetch(\"/products.json\").then(response=>response.json()).then(data=>setProducts(data));},[]);const handleAddToCart=product=>{setCartItems(prevItems=>{const existingItem=prevItems.find(item=>item.product.id===product.id);if(existingItem){return prevItems.map(item=>item.product.id===product.id?{...item,quantity:item.quantity+1}:item);}else{return[...prevItems,{product,quantity:1}];}});};const handleAddItem=productId=>{setCartItems(prevItems=>prevItems.map(item=>item.product.id===productId?{...item,quantity:item.quantity+1}:item));};const handleRemoveItem=productId=>{setCartItems(prevItems=>{const existingItem=prevItems.find(item=>item.product.id===productId);if(existingItem&&existingItem.quantity>1){return prevItems.map(item=>item.product.id===productId?{...item,quantity:item.quantity-1}:item);}else{return prevItems.filter(item=>item.product.id!==productId);}});};const handleChangeQuantity=(productId,quantity)=>{if(quantity<1)return;setCartItems(prevItems=>prevItems.map(item=>item.product.id===productId?{...item,quantity}:item));};const handlePlaceOrder=()=>{const orderData={items:cartItems,total:cartItems.reduce((sum,item)=>sum+(item.product.price.main*100+item.product.price.fractional)*item.quantity/100,0),date:new Date().toISOString()};localStorage.setItem(\"currentOrder\",JSON.stringify(orderData));window.location.href=\"/confirmation.html\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[currentPage===\"products\"&&/*#__PURE__*/_jsx(ProductList,{products:products,onAddToCart:handleAddToCart,onViewCart:()=>setCurrentPage(\"cart\")}),currentPage===\"cart\"&&/*#__PURE__*/_jsx(ShoppingCart,{cartItems:cartItems,onAddItem:handleAddItem,onRemoveItem:handleRemoveItem,onChangeQuantity:handleChangeQuantity,onCheckout:()=>setCurrentPage(\"summary\"),onContinueShopping:()=>setCurrentPage(\"products\")}),currentPage===\"summary\"&&/*#__PURE__*/_jsx(OrderSummary,{cartItems:cartItems,onPlaceOrder:handlePlaceOrder,onBackToCart:()=>setCurrentPage(\"cart\")})]});};export default App;","map":{"version":3,"names":["useEffect","useState","ProductList","ShoppingCart","OrderSummary","jsx","_jsx","jsxs","_jsxs","App","products","setProducts","cartItems","setCartItems","currentPage","setCurrentPage","fetch","then","response","json","data","handleAddToCart","product","prevItems","existingItem","find","item","id","map","quantity","handleAddItem","productId","handleRemoveItem","filter","handleChangeQuantity","handlePlaceOrder","orderData","items","total","reduce","sum","price","main","fractional","date","Date","toISOString","localStorage","setItem","JSON","stringify","window","location","href","className","children","onAddToCart","onViewCart","onAddItem","onRemoveItem","onChangeQuantity","onCheckout","onContinueShopping","onPlaceOrder","onBackToCart"],"sources":["D:/ocadostore/src/App.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { CartItem, Product } from \"./types\";\nimport ProductList from \"./components/ProductList\";\nimport ShoppingCart from \"./components/ShoppingCart\";\nimport OrderSummary from \"./components/OrderSummary\";\n\nconst App: React.FC = () => {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n  const [currentPage, setCurrentPage] = useState<\n    \"products\" | \"cart\" | \"summary\"\n  >(\"products\");\n\n  useEffect(() => {\n    fetch(\"/products.json\")\n      .then((response) => response.json())\n      .then((data) => setProducts(data));\n  }, []);\n\n  const handleAddToCart = (product: Product) => {\n    setCartItems((prevItems) => {\n      const existingItem = prevItems.find(\n        (item) => item.product.id === product.id\n      );\n      if (existingItem) {\n        return prevItems.map((item) =>\n          item.product.id === product.id\n            ? { ...item, quantity: item.quantity + 1 }\n            : item\n        );\n      } else {\n        return [...prevItems, { product, quantity: 1 }];\n      }\n    });\n  };\n\n  const handleAddItem = (productId: number) => {\n    setCartItems((prevItems) =>\n      prevItems.map((item) =>\n        item.product.id === productId\n          ? { ...item, quantity: item.quantity + 1 }\n          : item\n      )\n    );\n  };\n\n  const handleRemoveItem = (productId: number) => {\n    setCartItems((prevItems) => {\n      const existingItem = prevItems.find(\n        (item) => item.product.id === productId\n      );\n      if (existingItem && existingItem.quantity > 1) {\n        return prevItems.map((item) =>\n          item.product.id === productId\n            ? { ...item, quantity: item.quantity - 1 }\n            : item\n        );\n      } else {\n        return prevItems.filter((item) => item.product.id !== productId);\n      }\n    });\n  };\n\n  const handleChangeQuantity = (productId: number, quantity: number) => {\n    if (quantity < 1) return;\n    setCartItems((prevItems) =>\n      prevItems.map((item) =>\n        item.product.id === productId ? { ...item, quantity } : item\n      )\n    );\n  };\n\n  const handlePlaceOrder = () => {\n    const orderData = {\n      items: cartItems,\n      total: cartItems.reduce(\n        (sum, item) =>\n          sum +\n          ((item.product.price.main * 100 + item.product.price.fractional) *\n            item.quantity) /\n            100,\n        0\n      ),\n      date: new Date().toISOString(),\n    };\n    localStorage.setItem(\"currentOrder\", JSON.stringify(orderData));\n    window.location.href = \"/confirmation.html\";\n  };\n\n  return (\n    <div className=\"App\">\n      {currentPage === \"products\" && (\n        <ProductList\n          products={products}\n          onAddToCart={handleAddToCart}\n          onViewCart={() => setCurrentPage(\"cart\")}\n        />\n      )}\n      {currentPage === \"cart\" && (\n        <ShoppingCart\n          cartItems={cartItems}\n          onAddItem={handleAddItem}\n          onRemoveItem={handleRemoveItem}\n          onChangeQuantity={handleChangeQuantity}\n          onCheckout={() => setCurrentPage(\"summary\")}\n          onContinueShopping={() => setCurrentPage(\"products\")}\n        />\n      )}\n      {currentPage === \"summary\" && (\n        <OrderSummary\n          cartItems={cartItems}\n          onPlaceOrder={handlePlaceOrder}\n          onBackToCart={() => setCurrentPage(\"cart\")}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE3C,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CACpD,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,GAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAa,EAAE,CAAC,CAC1D,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAE5C,UAAU,CAAC,CAEbD,SAAS,CAAC,IAAM,CACdgB,KAAK,CAAC,gBAAgB,CAAC,CACpBC,IAAI,CAAEC,QAAQ,EAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,EAAKT,WAAW,CAACS,IAAI,CAAC,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,eAAe,CAAIC,OAAgB,EAAK,CAC5CT,YAAY,CAAEU,SAAS,EAAK,CAC1B,KAAM,CAAAC,YAAY,CAAGD,SAAS,CAACE,IAAI,CAChCC,IAAI,EAAKA,IAAI,CAACJ,OAAO,CAACK,EAAE,GAAKL,OAAO,CAACK,EACxC,CAAC,CACD,GAAIH,YAAY,CAAE,CAChB,MAAO,CAAAD,SAAS,CAACK,GAAG,CAAEF,IAAI,EACxBA,IAAI,CAACJ,OAAO,CAACK,EAAE,GAAKL,OAAO,CAACK,EAAE,CAC1B,CAAE,GAAGD,IAAI,CAAEG,QAAQ,CAAEH,IAAI,CAACG,QAAQ,CAAG,CAAE,CAAC,CACxCH,IACN,CAAC,CACH,CAAC,IAAM,CACL,MAAO,CAAC,GAAGH,SAAS,CAAE,CAAED,OAAO,CAAEO,QAAQ,CAAE,CAAE,CAAC,CAAC,CACjD,CACF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,aAAa,CAAIC,SAAiB,EAAK,CAC3ClB,YAAY,CAAEU,SAAS,EACrBA,SAAS,CAACK,GAAG,CAAEF,IAAI,EACjBA,IAAI,CAACJ,OAAO,CAACK,EAAE,GAAKI,SAAS,CACzB,CAAE,GAAGL,IAAI,CAAEG,QAAQ,CAAEH,IAAI,CAACG,QAAQ,CAAG,CAAE,CAAC,CACxCH,IACN,CACF,CAAC,CACH,CAAC,CAED,KAAM,CAAAM,gBAAgB,CAAID,SAAiB,EAAK,CAC9ClB,YAAY,CAAEU,SAAS,EAAK,CAC1B,KAAM,CAAAC,YAAY,CAAGD,SAAS,CAACE,IAAI,CAChCC,IAAI,EAAKA,IAAI,CAACJ,OAAO,CAACK,EAAE,GAAKI,SAChC,CAAC,CACD,GAAIP,YAAY,EAAIA,YAAY,CAACK,QAAQ,CAAG,CAAC,CAAE,CAC7C,MAAO,CAAAN,SAAS,CAACK,GAAG,CAAEF,IAAI,EACxBA,IAAI,CAACJ,OAAO,CAACK,EAAE,GAAKI,SAAS,CACzB,CAAE,GAAGL,IAAI,CAAEG,QAAQ,CAAEH,IAAI,CAACG,QAAQ,CAAG,CAAE,CAAC,CACxCH,IACN,CAAC,CACH,CAAC,IAAM,CACL,MAAO,CAAAH,SAAS,CAACU,MAAM,CAAEP,IAAI,EAAKA,IAAI,CAACJ,OAAO,CAACK,EAAE,GAAKI,SAAS,CAAC,CAClE,CACF,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAG,oBAAoB,CAAGA,CAACH,SAAiB,CAAEF,QAAgB,GAAK,CACpE,GAAIA,QAAQ,CAAG,CAAC,CAAE,OAClBhB,YAAY,CAAEU,SAAS,EACrBA,SAAS,CAACK,GAAG,CAAEF,IAAI,EACjBA,IAAI,CAACJ,OAAO,CAACK,EAAE,GAAKI,SAAS,CAAG,CAAE,GAAGL,IAAI,CAAEG,QAAS,CAAC,CAAGH,IAC1D,CACF,CAAC,CACH,CAAC,CAED,KAAM,CAAAS,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAAC,SAAS,CAAG,CAChBC,KAAK,CAAEzB,SAAS,CAChB0B,KAAK,CAAE1B,SAAS,CAAC2B,MAAM,CACrB,CAACC,GAAG,CAAEd,IAAI,GACRc,GAAG,CACF,CAACd,IAAI,CAACJ,OAAO,CAACmB,KAAK,CAACC,IAAI,CAAG,GAAG,CAAGhB,IAAI,CAACJ,OAAO,CAACmB,KAAK,CAACE,UAAU,EAC7DjB,IAAI,CAACG,QAAQ,CACb,GAAG,CACP,CACF,CAAC,CACDe,IAAI,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAC/B,CAAC,CACDC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAEC,IAAI,CAACC,SAAS,CAACd,SAAS,CAAC,CAAC,CAC/De,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,oBAAoB,CAC7C,CAAC,CAED,mBACE7C,KAAA,QAAK8C,SAAS,CAAC,KAAK,CAAAC,QAAA,EACjBzC,WAAW,GAAK,UAAU,eACzBR,IAAA,CAACJ,WAAW,EACVQ,QAAQ,CAAEA,QAAS,CACnB8C,WAAW,CAAEnC,eAAgB,CAC7BoC,UAAU,CAAEA,CAAA,GAAM1C,cAAc,CAAC,MAAM,CAAE,CAC1C,CACF,CACAD,WAAW,GAAK,MAAM,eACrBR,IAAA,CAACH,YAAY,EACXS,SAAS,CAAEA,SAAU,CACrB8C,SAAS,CAAE5B,aAAc,CACzB6B,YAAY,CAAE3B,gBAAiB,CAC/B4B,gBAAgB,CAAE1B,oBAAqB,CACvC2B,UAAU,CAAEA,CAAA,GAAM9C,cAAc,CAAC,SAAS,CAAE,CAC5C+C,kBAAkB,CAAEA,CAAA,GAAM/C,cAAc,CAAC,UAAU,CAAE,CACtD,CACF,CACAD,WAAW,GAAK,SAAS,eACxBR,IAAA,CAACF,YAAY,EACXQ,SAAS,CAAEA,SAAU,CACrBmD,YAAY,CAAE5B,gBAAiB,CAC/B6B,YAAY,CAAEA,CAAA,GAAMjD,cAAc,CAAC,MAAM,CAAE,CAC5C,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAN,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}